<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch Test</title>
</head>
<body>
    <h1>Fetch Test</h1>
    <button id="testFetch">Test Fetch</button>
    <div id="result"></div>

    <script>
        document.getElementById('testFetch').addEventListener('click', async () => {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';

            try {
                const responseNoBody = await fetch('/api/error-no-body');
                const textNoBody = await responseNoBody.text();
                const resultNoBody = {
                    ok: responseNoBody.ok,
                    status: responseNoBody.status,
                    text: textNoBody
                };
                resultDiv.innerHTML += `<pre>/api/error-no-body -- ${JSON.stringify(resultNoBody, null, 2)}</pre>`;
            } catch (error) {
                resultDiv.innerHTML += `<p>Error fetching /api/error-no-body: ${error}</p>`;
            }

            try {
                const responseWithBody = await fetch('/api/error-with-body');
                const textWithBody = await responseWithBody.text();
                const resultWithBody = {
                    ok: responseWithBody.ok,
                    status: responseWithBody.status,
                    text: textWithBody
                };
                resultDiv.innerHTML += `<pre>/api/error-with-body -- ${JSON.stringify(resultWithBody, null, 2)}</pre>`;
            } catch (error) {
                resultDiv.innerHTML += `<p>Error fetching /api/error-with-body: ${error}</p>`;
            }
        });
    </script>
</body>
</html> 